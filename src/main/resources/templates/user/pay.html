<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<!-- 支付 -->
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<meta charset="utf-8">
<title></title>
<!-- MZUI CSS 文件 -->
<link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/zui/1.10.0/css/zui.min.css">
<link href="/user/css/mzui.min.css" rel="stylesheet">
<link href="/user/css/main.css?v=1" rel="stylesheet">

<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
<!-- ZUI Javascript 依赖 jQuery -->
<script src="https://cdn.bootcdn.net/ajax/libs/zui/1.10.0/lib/jquery/jquery.js"></script>
   <!-- 引入 MZUI 的 JS 文件 -->
<script src="/user/js/mzui.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/zui/1.10.0/js/zui.min.js"></script>
<script src="/user/js/comm.js"></script>
<script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<style>

body {
	background: #1b181b;
}

.contentHeader {
	text-align: center;
	margin: 0px auto;
}

.contentHeader {
	height: 473px;
}

.headerTitleImg {
	padding-top: 50px;
	padding-bottom: 50px;
}

.header_desc {
	margin-left: 10px;
	margin-right: 10px;
	color: #FFFFFFFF;
	font: 20px;
}

.headerTitle {
	padding: 0 60px 0 60px;
}

.headerTitleContent {
	margin: 21px 0 21px 0;
}

.headerTitleContent p {
	color: #FFFFFFFF;
	font-size: 12px !important;
}

/* .headerTitleContent * {
				boxContent-sizing: border-boxContent;
			} */
.headerTitleContent .boxContent {
	float: left;
	width: 50%;
	padding-bottom: 17px;
}

.headerTitleContent .boxContent .boxContentContent {
	padding: 10px;
	margin: 0 auto;
	width: 75%;
	height: 77px;
	background: RGBA(56, 55, 79, 1);
	border-radius: 15px;
}

.clearfix::after {
	content: "";
	clear: both;
	display: table;
}

.taocanTitle {
	font-size: 20px;
	font-family: Source Han Sans CN;
	font-weight: 400;
	line-height: 14px;
	color: #e2d7d7;
	opacity: 1;
}

.line {
	height: 0px;
    border: 1px solid #2b2b2a;
    opacity: 0.5;
}

.contentTitleContent .boxContent {
	float: left;
	width: 50%;
	padding-bottom: 17px;
	position: relative;
}

.contentTitleContent .boxContent .tcContent {
	padding: 10px 10px 0px 10px;
	margin: 0 auto;
	width: 75%;
	height: 90px;
	background-color: #1a1a18;
    border: 1px solid #1a1a18;
	opacity: 1;
	border-radius: 6px;
	cursor: pointer;
}

.contentTitleContent .boxContent .tcContent:hover {
	border-color: #d2b6b6;
}

.contentTitleContent .boxContent .tcContentBorder {
	border-color: #d2b6b6;
}

.tcTitle {
	font-size: 16px;
	font-family: 蘋方-簡;
	font-weight: normal;
	line-height: 22px;
	color: #f5ebeb;
	opacity: 1;
}

.tcSourcePrice {
	font-size: 10px;
	margin-top: 5px;
	font-family: 蘋方-簡;
	font-weight: normal;
	line-height: 14px;
	color: #999999;
	opacity: 1;
	text-decoration: line-through;
}

.tcFinalPrice {
	color: #F29808FF;
	margin-top: 5px;
	font-size: 25px;
}

.tcDesc {
	color:#909093;
}

.tcMonth {
	margin-top: 15px;
	height: 14px;
	font-size: 10px;
	font-weight: normal;
	color: #CA983E;
	opacity: 1;
	line-height: 12px;
}

.monthBack {
	width: 60%;
	background: #FBF0DC;
	opacity: 1;
	border-radius: 8px;
	margin: 0px 30% 0px 20%;
}

.payButton {
	margin-top:20px;
    text-align: center;
    padding: 10px 70px 35px 70px;
    width: 300px;
    height: 24px;
    font-size: 18px;
    font-family: Microsoft YaHei;
    font-weight: 400;
    color: #000000;
    opacity: 1;
    background-image: linear-gradient(to right, #F5D794FF, #F0B42AFF);
    border-radius: 5px;
    cursor: pointer;
}

.tcTag {
	width: 37px;
    height: 18px;
    font-size: 10px;
    color: #FFFFFF;
    opacity: 1;
    position: absolute;
    top: -6%;
    right: 12%;
    background: red;
    border-radius: 5px;
}

.disable {
    pointer-events: none;
}

    @media screen and (min-width:600px) {
           .contentBody{
           		width:500px;
           		margin:0 auto;
		    }
       }
       
       
      .tsn-margin-zd {
      padding: 3px 18px 3px 21px;
      
      } 
      
  .cus-active {
  	  border: 1px solid #ffc107;
  	  box-shadow: 0px 0px 6px #ffc107;
  }
  
  .card {
  	cursor: pointer;
  }
  
  .radio-inline {
  	color:white;
  }
  
  .activi-card {
  	background: #673ab7
  }
  
  .activi-card .tcDesc {
  	color:#ffc107;
  }
  
</style>
</head>
<body>

	<div class="heading">
	  <nav class="nav">
	    <a id="menuExampleBtn" class="btn btn-lg" data-name="menuExample" data-display="modal" data-remote="/page/menu.html" data-placement="left"><i class="icon-bars" style="color:#fcae32"></i></a>
	  </nav>
	  <div class="title" style="color:white;"><strong>会员充值</strong></div>
	  <nav class="nav">
  	  </nav>
	</div>
	

	<div class="content tsn-margin taoContent">
	
		<div class="cards">
		  <div class="col-xs-12 col-md-4 col-sm-6 col-lg-3" th:each="charge : ${ chargeList }">
		    <div class="card flex flex-middle tsn-margin-zd content-space-between" th:classappend="${charge.chargeType eq '99'} ? 'activi-card' : ''" th:attr-charge-id="${charge.chargeId}">
			    <div style="width: 60%" th:if="${ charge.chargeType eq '10' }"><div class="avatar red circle">月</div></div>
			    <div style="width: 60%" th:if="${ charge.chargeType eq '11' }"><div class="avatar yellow circle">季</div></div>
			    <div style="width: 60%" th:if="${ charge.chargeType eq '12' }"><div class="avatar blue circle">半</div></div>
			    <div style="width: 60%" th:if="${ charge.chargeType eq '13' }"><div class="avatar green circle">年</div></div>
			    <div style="width: 60%" th:if="${ charge.chargeType eq '14' }"><div class="avatar red circle">永</div></div>
			    <div style="width: 60%" th:if="${ charge.chargeType eq '99' }"><div class="avatar red circle">活</div></div>
		    	<div style="width: 80%" class="text-center">
			    	<span class="tcFinalPrice" th:text="'¥' + ${charge.finalMoney}"></span>
			    	<span class="tcSourcePrice" th:text="${charge.discount/10} + '折'"></span>
			    	<div class="tcDesc" th:text="${charge.chargeDesc}"></div>
		    	</div>
		    </div>
		  </div>
		  <!-- <div class="col-xs-12 col-md-4 col-sm-6 col-lg-3">
		    <div class="card flex flex-middle tsn-margin-zd content-space-between activi-card">
			    <div style="width: 60%"><div class="avatar yellow circle">活</div></div>
		    	<div style="width: 80%" class="text-center">
			    	<span class="tcFinalPrice">¥70</span>
			    	<span class="tcSourcePrice">8折</span>
			    	<div class="tcDesc">限时活动7天优惠套餐，抓紧体验</div>
		    	</div>
		    </div>
		  </div> -->
		  <!-- <div class="col-xs-12 col-md-4 col-sm-6 col-lg-3">
		    <div class="card flex flex-middle tsn-margin-zd content-space-between" attr-charge-id="3">
			    <div style="width: 60%"><div class="avatar blue circle">半</div></div>
		    	<div style="width: 50%" class="text-center">
			    	<span class="tcFinalPrice">¥135</span>
			    	<span class="tcSourcePrice">8折</span>
			    	<div class="tcDesc">半年卡</div>
		    	</div>
		    </div>
		  </div> -->
		  <!-- <div class="col-xs-12 col-md-4 col-sm-6 col-lg-3">
		    <div class="card flex flex-middle tsn-margin-zd content-space-between" attr-charge-id="4">
			    <div style="width: 60%"><div class="avatar green circle">年</div></div>
		    	<div style="width: 50%" class="text-center">
			    	<span class="tcFinalPrice">¥256</span>
			    	<span class="tcSourcePrice">8折</span>
			    	<div class="tcDesc">年卡</div>
		    	</div>
		    </div>
		  </div>
		  <div class="col-xs-12 col-md-4 col-sm-6 col-lg-3">
		    <div class="card flex flex-middle tsn-margin-zd content-space-between" attr-charge-id="15">
			    <div style="width: 60%"><div class="avatar red circle">永</div></div>
		    	<div style="width: 50%" class="text-center">
			    	<span class="tcFinalPrice">¥520</span>
			    	<span class="tcSourcePrice">8折</span>
			    	<div class="tcDesc">永久</div>
		    	</div>
		    </div>
		  </div> -->
		</div>
		
		<div class="radio-inline"><input type="radio" name="payType" checked="checked" id="payType1" value="alipay"><label for="primaryradio1">支付宝</label></div>
		<div class="radio-inline"><input type="radio" name="payType" id="payType2" value="wxpay"><label for="primaryradio2">微信</label></div>
		<div class="radio-inline"><input type="radio" name="payType" id="payType3" value="usdt"><label for="primaryradio3">usdt</label></div>
		
		<div class="payButton" id="startPay">
			<span>立即支付</span>
		</div>
		
		<div>
		<form id="subPay" action="https://www.sanzongzui.com/submit.php" method="post">
			<input type="hidden" id="pid" name="pid"/>
			<input type="hidden" id="type" name="type" value="alipay"/>
			<input type="hidden" id="notifyUrl" name="notify_url"/>
			<input type="hidden" id="returnUrl" name="return_url"/>
			<input type="hidden" id="outTradeNo" name="out_trade_no"/>
			<input type="hidden" id="name" name="name"/>
			<input type="hidden" id="money" name="money"/>
			<input type="hidden" id="sign" name="sign"/>
			<input type="hidden" name="sign_type" value="MD5"/>
		</form>
		
		</div>

	</div>

	<script type="text/javascript">
		/*<![CDATA[*/
		           
		$(function() {
		        	   
   	        event();
   	        
   	        var subOrderObj = {
  	        	chargeId:"",
  	        	payType:"alipay",
   	        }
   	        
   	        function event() {
   	        	
   	        	$("input[name='payType']").click(function(){
   	        		subOrderObj.payType = $(this).val();
   	        		$("#type").val(subOrderObj.payType);
   	        	})
   	        	
   	        	$(".taoContent .card").click(function() {
   	        		$(this).addClass("cus-active")
   	        		$(this).parent().siblings().find(".card").removeClass("cus-active");
   	        		subOrderObj.chargeId = $(this).attr("attr-charge-id");
   	        	})
   	        	
   	        	
   	        	$("#startPay").click(function() {
   	        		beforeSubOrder();
   	        	})
   	        }
   	        
   	        function beforeSubOrder() {
   	        	
   	        	if (!subOrderObj.chargeId) {
   	        		new $.zui.Messager('请选择套餐', {
   	          			placement: 'center'
   	    		    }).show();
   	        		return false;
   	        	}
   	        	
   	        	$.ajax({
                    type : "POST",
                    url : "/order/subefore",
                    beforeSend: function(request) {
                   	 $("#startPay").text("正在支付中..")
                   	 $("#startPay").addClass("disable");
                    },
                    dataType : "json",
                    contentType: "application/json; charset=utf-8",
                    data : JSON.stringify(subOrderObj),
                    success : function(res) {
                   	 	if (res.code == '000000') {
                   	 		var data = res.data;
     	                    $("#pid").val(data.pid);
     	                    $("#notifyUrl").val(data.notifyUrl);
     	                    $("#returnUrl").val(data.returnUrl);
     	                    $("#outTradeNo").val(data.orderNo);
     	                    $("#name").val(data.productName);
     	                    $("#money").val(data.finalPrice);
     	                    $("#sign").val(data.sign);
     	                   	$("#startPay").text("立即支付")
     	                   	$("#startPay").removeClass("disable");
     	                    $("#subPay").submit();
						}else if (res.code === "100991") {
							new $.zui.Messager('用户未登录，请重试', {
		   	          			placement: 'center'
		   	    		    }).show();
						}else if (res.code === "300797") {
							new $.zui.Messager(res.msg, {
		   	          			placement: 'center'
		   	    		    }).show();
						}
                    },
                    complete : function() {
                   	 $("#startPay").text("立即支付")
                   	 $("#startPay").removeClass("disable");
                    }
                });
   	        	
   	        }
   	
   	        // 选择资费类型
   	        //TODO 这里加个高亮效果
   	        function checkChargeType(chargeType) {
   	            for(var i in chargeList) {
   	                if (chargeType == chargeList[i].chargeType) {
   	                    charge = chargeList[i];
   	                    charge.memId = memId
   	                }
   	            }
   	        }
        	   
           })
	
		/*]]>*/
	</script>
</body>
</html>
